oscillator sine(): sample {
    return sin(phase())
}

sound play(note: pitch, duration: time) {
    do t = 0 ; t < duration ; t + SAMPLE_PERIOD {
        let s = 0.3 * sine() at time_phase(t, note)
        mix(pan(s, sin(t * TAU) * 0.5))
        next()
    }
}

sound main() {
    for note in [C4, D4, E4, F4, G4, A4, B4, C5] {
        play(note, 1/4)
        skip(1 / 4 * SAMPLE_RATE)
    }
}
